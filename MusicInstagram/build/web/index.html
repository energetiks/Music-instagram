<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Login page</title>
        <link rel="stylesheet" type="text/css" href="css/index.css"/>        
    </head>
    <body>
        <div id="wrapper">
            <div id="panel_l">
                <form>
                    <table cellpadding="10" cellspacing="1">
                        <thead>
                            <tr>
                                <th colspan="2" scope="colgroup">
                                    <span style="color: #FFF">Login</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <label>        Username</label>
                                </td>
                                <td>
                                    <input id="username" type="text"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>        Password</label>
                                </td>
                                <td>
                                    <input id="password" type="password"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <label id="error_message" style="color: red; width: 600px; text-align: center"></label>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2">
                                    <input type="button" onclick="window.location.href='/MusicInstagram/registration.html'; return false;" value="registration" class="reg"/>
                                    <input type="button" onclick="login()" value="login" class="submit"/>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </form>
            </div>
        </div>
        <script type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script>
        <script type="text/javascript">
            
            login = function() {
                    $.ajax({
                        type: "POST",
                        url: "./webresources/user/login",
                        data: {username: $('#username').val(),
                               password: $('#password').val() },
                        success: function(responseText, statusText) {
                            if (statusText === 'success') {
                                if (responseText === 'Success') {
                                    window.location.href='/MusicInstagram/homePage.html';
                                }
                                else {
                                    $('#error_message').text(responseText);
                                }
                            }
                        },
                        dataType: "json"
                    });                 
            };
        </script>
    </body>
</html>
